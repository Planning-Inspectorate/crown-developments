{% extends "views/layouts/main.njk" %}
{% from "govuk/components/warning-text/macro.njk" import govukWarningText %}

{% block pageTitle %}{{"Check your Answers - " + journeyTitle + " - Manage a Crown Development Application" }}{% endblock %}

{% block content %}
    <div class="govuk-grid-row">
        <div class="govuk-grid-column-full govuk-!-margin-bottom-3">
            <h1 class="govuk-heading-l">
                Check your answers
            </h1>
        </div>
    </div>

    {% if summaryListData.sections.length > 1%}
        <div class="govuk-grid-row">
            <div class="govuk-grid-column-three-quarters-from-desktop">
                <p class="govuk-body govuk-!-font-weight-bold">Submissions incomplete</p>
                <p class="govuk-!-margin-bottom-7">You have completed {{ summaryListData.completedSectionCount }}
                    of {{ summaryListData.sections.length + 1 }} sections.</p>
            </div>
        </div>
    {% endif %}
    {% block dynTaskList %}{% endblock %}
    <script {% if cspNonce %}nonce={{ cspNonce }}{% endif %}>
			document.addEventListener("DOMContentLoaded", function() {
				const toggle = document.getElementById('toggle-list');
				const list = document.getElementById('answer-list');
                if (!toggle || !list) {
                    return;
                }
				const items = list.querySelectorAll('li');
                const hiddenCount = items.length - 2;
				let expanded = false;
				toggle.addEventListener('click', function(e) {
					e.preventDefault();
					expanded = !expanded;
					for (let i = 2; i < items.length; i++) {
						items[i].hidden = !expanded;
					}
					toggle.textContent = expanded
						? 'Show less'
						: 'Show ' + hiddenCount + ' more';
				});
			});
    </script>
{% endblock %}

{% if summaryWarningMessage %}
    {% set beforeSubmitButton = govukWarningText({
        text: summaryWarningMessage
    }) %}
{% endif %}
