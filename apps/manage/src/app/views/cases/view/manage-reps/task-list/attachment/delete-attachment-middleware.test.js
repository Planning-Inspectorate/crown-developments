//TODO: write tests for this function
