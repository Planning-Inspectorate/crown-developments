{% extends "views/layouts/main.njk" %}

{%- from "govuk/components/table/macro.njk" import govukTable -%}

{% block pageHeading %}
	<div class="govuk-grid-row">
		<div class="govuk-grid-column-full">
			<h1 class="govuk-heading-xl govuk-!-margin-bottom-4">
				{{ pageHeading or pageTitle }}
			</h1>
			<p class="govuk-body">This is a list of all Crown Development applications.</p>
		</div>
	</div>
{% endblock %}

{% block pageContent %}
	{% set rows = [] %}

	{% for application in applications %}
	{% set rows = (rows.push([
		{
			html: "<a class='govuk-link' href='applications/" + application.id + "/'>" + application.reference + "</a>"
		},
		{
			text: application.applicantName
		},
		{
			text: application.lpaName
		},
		{
			text: application.stage
		}
	]), rows) %}
	{% endfor %}

	{{
		govukTable({
			head: [
				{
					text: "Application Reference"
				},
				{
					text: "Applicant"
				},
				{
					text: "Local Planning Authority"
				},
				{
					text: "Stage"
				}
			],
			rows: rows
		})
	}}
{% endblock %}